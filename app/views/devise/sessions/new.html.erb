<%= render "shared/navbar" %>

<div class="container py-5">
  <div class="mx-auto" style="max-width: 520px;">

    <!-- Social login icons (centered above title) -->
    <div class="d-flex justify-content-center gap-3 mb-4">
      <!-- Google -->
      <%= link_to "#", class: "social-btn" do %>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="24" height="24">
          <path fill="#4285F4" d="M24 9.5c3.5 0 6.2 1.5 7.6 2.7l5.5-5.5C33.6 3.5 29.2 1.5 24 1.5 14.9 1.5 7.2 7.8 4.6 16.1l6.9 5.4C13.2 14.5 18.1 9.5 24 9.5z"/>
          <path fill="#34A853" d="M46.1 24.5c0-1.7-.2-3.3-.5-4.9H24v9.3h12.5c-.5 2.8-2 5.2-4.2 6.9l6.5 5c3.8-3.5 6.3-8.8 6.3-16.3z"/>
          <path fill="#FBBC05" d="M11.5 28.5c-.5-1.5-.8-3.1-.8-4.7s.3-3.2.8-4.7l-6.9-5.4c-1.4 2.8-2.1 6-2.1 10.1s.8 7.3 2.1 10.1l6.9-5.4z"/>
          <path fill="#EA4335" d="M24 46.5c6.5 0 12-2.1 16-5.6l-6.5-5c-2 1.4-4.6 2.2-7.5 2.2-5.9 0-10.9-4-12.7-9.3l-6.9 5.4C7.2 40.2 14.9 46.5 24 46.5z"/>
        </svg>
      <% end %>

      <!-- Facebook -->
      <%= link_to "#", class: "social-btn" do %>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20">
          <path fill="#1877F2" d="M24 12a12 12 0 1 0-13.9 11.9v-8.4h-2.6V12h2.6V9.4c0-2.6 1.5-4.1 3.9-4.1 1.1 0 2.2.2 2.2.2v2.5h-1.2c-1.2 0-1.6.8-1.6 1.6V12h2.8l-.4 3.5h-2.4v8.4A12 12 0 0 0 24 12"/>
          <path fill="#fff" d="M16.6 15.5 17 12h-2.8v-2.4c0-.8.4-1.6 1.6-1.6h1.2V5.5s-1.1-.2-2.2-.2c-2.4 0-3.9 1.5-3.9 4.1V12H8.3v3.5h2.6v8.4c.5.1 1 .1 1.5.1s1 0 1.5-.1v-8.4h2.7z"/>
        </svg>
      <% end %>

      <!-- Apple -->
      <%= link_to "#", class: "social-btn" do %>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" width="20" height="20">
          <path fill="black" d="M318.7 268.7c-.5-55 44.8-81.4 46.8-82.7-25.5-37.4-65-42.5-79.1-43-33.8-3.4-66 20-83.1 20s-43.6-19.5-71.7-19-55.1 28-69.7 57c-29.9 52.4-7.7 129.7 21.5 172.1 14.3 20.6 31.4 43.8 53.8 43 21.6-.9 29.7-13.9 55.6-13.9s33.3 13.9 56.1 13.5c23.1-.4 37.7-21 51.9-41.8 16.3-23.9 23-47.2 23.4-48.4-.5-.2-45-17.3-45.3-68.8zM244.6 90c15.2-18.4 25.5-44.2 22.6-70-21.8.9-48.1 14.5-63.6 32.9-14 16.4-26.3 42.6-23 67.8 24.2 1.8 48.8-12.3 64-30.7z"/>
        </svg>
      <% end %>
    </div>

    <!-- Title -->
    <h1 class="text-center fw-bold mb-4">Login</h1>

    <%= form_for(resource, as: resource_name, url: session_path(resource_name),
                 html: { id: "snooflyLoginForm", class: "w-100", data: { controller: "login" } }) do |f| %>

      <!-- Email -->
      <div class="mb-3">
        <label class="form-label">Email <span class="text-danger">*</span></label>
        <%= f.email_field :email, autofocus: true, autocomplete: "email",
              class: "form-control form-control-lg",
              data: { login_target: "email", action: "input->login#updateBtn" } %>
      </div>

      <!-- Password with toggle -->
      <div class="mb-2 position-relative">
        <label class="form-label">Password <span class="text-danger">*</span></label>
        <div class="input-group">
          <%= f.password_field :password, autocomplete: "current-password",
                class: "form-control form-control-lg", id: "passwordField",
                data: { login_target: "password", action: "input->login#updateBtn" } %>
          <button class="btn btn-outline-secondary" type="button"
                  id="togglePassword"
                  aria-label="Show password"
                  data-login-target="togglePassword"
                  data-action="login#togglePassword">
            <i class="far fa-eye"></i>
          </button>
        </div>
      </div>

      <!-- Forgot password -->
      <% if devise_mapping.recoverable? %>
        <div class="d-flex justify-content-end mb-3">
          <%= link_to "Forgot password?", new_password_path(resource_name), class: "text-decoration-none login-forgot" %>
        </div>
      <% end %>

      <!-- Stay logged in -->
      <% if devise_mapping.rememberable? %>
        <div class="form-check mb-3">
          <%= f.check_box :remember_me, class: "form-check-input", id: "stayLoggedIn" %>
          <label class="form-check-label" for="stayLoggedIn">Stay logged in</label>
        </div>
      <% end %>

      <!-- Submit -->
      <div class="mb-4">
        <%= f.submit "Login", class: "btn w-100 btn-lg", id: "loginBtn" %>
      </div>

      <!-- CTA -->
      <p class="text-center text-muted mb-0">
        Not a Snoofly customer yet?
        <%= link_to "Sign up for our free trial", new_registration_path(resource_name), class: "login-signup" %>
      </p>
    <% end %>
  </div>
</div>