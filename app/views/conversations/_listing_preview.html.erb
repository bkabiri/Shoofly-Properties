<%# locals: listing %>
<div class="listing-preview card border-0 shadow-sm">
  <div class="row g-0">
    <div class="col-12">
      <div class="lp-thumb-wrapper">
        <% if listing.banner_image&.attached? %>
          <%= image_tag(
                (listing.banner_image.variable? ?
                  listing.banner_image.variant(resize_to_fill: [960, 240]).processed :
                  listing.banner_image),
                class: "lp-thumb", alt: listing.title
              ) %>
        <% else %>
          <div class="lp-thumb placeholder d-flex align-items-center justify-content-center">
            <i class="bi bi-image fs-1 text-muted"></i>
          </div>
        <% end %>
      </div>
    </div>
    <div class="col-12">
      <div class="card-body py-3">
        <div class="d-flex align-items-center gap-2 small text-muted mb-1">
          <i class="bi bi-building"></i> Snoofly · Property
          <% if listing.respond_to?(:guide_price) && listing.guide_price.present? %>
            · <%= number_to_currency(listing.guide_price, unit: "£", precision: 0, delimiter: ",") %>
          <% end %>
        </div>
        <div class="fw-semibold mb-1"><%= listing.title %></div>
        <div class="small text-muted mb-2"><i class="bi bi-geo-alt"></i> <%= listing.address %></div>
        <%= link_to "View on Snoofly", listing_path(listing), class: "btn btn-light btn-sm px-3" %>
      </div>
    </div>
  </div>
</div>