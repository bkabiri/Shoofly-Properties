<!DOCTYPE html>
<html>
<head>
  <title>Snoofly</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= yield :head %>

  <!-- Favicon (Snoofly house) -->
  <%= favicon_link_tag "favicon.svg" %>

  <!-- ✅ Bootstrap CSS (must load before your app CSS for offcanvas etc.) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous">

  <!-- Bootstrap Icons -->
  <%= stylesheet_link_tag "https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css", media: "all" %>

  <!-- Your app styles (load after Bootstrap so you can override it) -->
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= stylesheet_link_tag "listings_show", media: "all" %>
  <%= stylesheet_link_tag "listings", media: "all" %>

  <!-- ✅ Bootstrap JS bundle (defer so it doesn’t block render) -->
  <%= javascript_include_tag "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js",
                             defer: true,
                             integrity: "sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz",
                             crossorigin: "anonymous" %>
<%= javascript_include_tag \
  "https://maps.googleapis.com/maps/api/js?key=#{ENV['GOOGLE_MAPS_API_KEY']}&libraries=places&loading=async",
  async: true, defer: true %>
  <%= javascript_importmap_tags %>
</head>

  <body>
    <%= yield %>
    <p class="notice"><%= notice %></p>
    <p class="alert"><%= alert %></p>
  </body>
</html>
